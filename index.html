<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Håvard</title>

    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>

    <style>
      body {
        font-size: 16px;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue",
          sans-serif;
      }

      #svg .show-on-hover {
        opacity: 0;
      }

      #svg:hover .show-on-hover {
        opacity: 1;
      }

      #svg .hide-on-hover {
        opacity: 1;
      }

      #svg:hover .hide-on-hover {
        opacity: 0;
      }

      #animate-arm {
        animation: armAnimation 0.2s linear infinite alternate;
        transform-origin: 50% 45%;
      }

      @keyframes armAnimation {
        from {
          transform: rotate(-35deg);
        }
        to {
          transform: rotate(35deg);
        }
      }
    </style>
  </head>
  <body>
    <h1>Håvard the Hover Man</h1>
    <p>This is Håvard. Håvard likes to be hovered. Please hover Håvard now!</p>

    <svg width="600" height="400" id="svg">
      <rect
        class="hide-on-hover"
        width="600"
        height="400"
        style="fill: #ffc2c2"
      />
      <rect
        class="show-on-hover"
        width="600"
        height="400"
        style="fill: #c2ffca"
      />

      <!-- Body -->
      <line
        x1="240"
        y1="380"
        x2="300"
        y2="280"
        style="stroke: black; stroke-width: 3"
      />
      <line
        x1="360"
        y1="380"
        x2="300"
        y2="280"
        style="stroke: black; stroke-width: 3"
      />
      <line
        x1="300"
        y1="280"
        x2="300"
        y2="160"
        style="stroke: black; stroke-width: 3"
      />
      <line
        class="hide-on-hover"
        x1="300"
        x2="240"
        y1="180"
        y2="260"
        style="stroke: black; stroke-width: 3"
      />
      <line
        class="hide-on-hover"
        x1="300"
        x2="360"
        y1="180"
        y2="260"
        style="stroke: black; stroke-width: 3"
      />
      <line
        id="animate-arm"
        class="show-on-hover"
        x1="190"
        x2="410"
        y1="180"
        y2="180"
        style="stroke: black; stroke-width: 3"
      />

      <!-- Head -->
      <circle
        cx="300"
        cy="100"
        r="60"
        stroke="black"
        stroke-width="3"
        fill-opacity="0"
      />

      <!-- Left eye -->
      <circle
        cx="280"
        cy="80"
        r="10"
        stroke="black"
        stroke-width="2"
        fill-opacity="0"
      />
      <circle cx="320" cy="80" r="2" stroke="black" stroke-width="2" />

      <!-- Right eye -->
      <circle
        cx="320"
        cy="80"
        r="10"
        stroke="black"
        stroke-width="2"
        fill-opacity="0"
      />
      <circle cx="280" cy="80" r="2" stroke="black" stroke-width="2" />

      <!-- Mouth -->
      <line
        class="hide-on-hover"
        x1="265"
        x2="335"
        y1="120"
        y2="120"
        style="stroke: black; stroke-width: 3"
      />
      <ellipse
        class="show-on-hover"
        cx="300"
        cy="120"
        rx="30"
        ry="15"
        stroke="black"
        stroke-width="2"
        fill-opacity="0"
      />
    </svg>

    <canvas id="canvas" width="600" height="400"></canvas>

    <script>
      const c = $("#canvas")[0];
      const ctx = c.getContext("2d");

      let deg = 0;
      let delta = 70 / 0.2 / 60;

      function drawCanvas() {
        ctx.clearRect(0, 0, c.width, c.height);
        ctx.beginPath();

        const isHovered = $("#canvas").is(":hover");

        ctx.fillStyle = isHovered ? "#c2ffca" : "#ffc2c2";
        ctx.fillRect(0, 0, 600, 400);

        ctx.lineWidth = 3;

        // Body
        ctx.moveTo(240, 380);
        ctx.lineTo(300, 280);
        ctx.moveTo(360, 380);
        ctx.lineTo(300, 280);
        ctx.moveTo(300, 280);
        ctx.lineTo(300, 160);

        // Arms
        if (isHovered) {
          ctx.stroke();
          ctx.save();

          ctx.translate(300, 180);
          ctx.rotate((deg * Math.PI) / 180);
          ctx.translate(-300, -180);

          ctx.moveTo(190, 180);
          ctx.lineTo(410, 180);

          ctx.stroke();
          ctx.restore();
        } else {
          ctx.moveTo(300, 180);
          ctx.lineTo(240, 260);
          ctx.moveTo(300, 180);
          ctx.lineTo(360, 260);
        }

        // Head
        ctx.moveTo(360, 100);
        ctx.arc(300, 100, 60, 0, Math.PI * 2, true);

        // Mouth
        ctx.moveTo(265, 120);
        if (!isHovered) {
          ctx.lineTo(335, 120);
        }

        ctx.stroke();

        ctx.lineWidth = 2;

        // Mouth
        if (isHovered) {
          ctx.moveTo(330, 120);
          ctx.ellipse(300, 120, 30, 15, 0, 0, Math.PI * 2);
        }

        // Left eye
        ctx.moveTo(290, 80);
        ctx.arc(280, 80, 10, 0, Math.PI * 2, true);
        ctx.moveTo(280, 80);
        ctx.arc(280, 80, 2, 0, Math.PI * 2, true);

        // Right eye
        ctx.moveTo(330, 80);
        ctx.arc(320, 80, 10, 0, Math.PI * 2, true);
        ctx.moveTo(320, 80);
        ctx.arc(320, 80, 2, 0, Math.PI * 2, true);

        ctx.stroke();

        deg += delta;

        if (deg <= -35 || deg >= 35) {
          delta = -delta;
        }

        requestAnimationFrame(drawCanvas);
      }

      requestAnimationFrame(drawCanvas);
    </script>
  </body>
</html>
